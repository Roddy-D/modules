#!name=IPtest
#!desc=适用于egern/surge面板的节点质量查询。测试某些出站倾向（使用）IPv6的节点会导致ippure查询不到。由于某些网站是抓取内容分析，可能会偶尔失败。如一直失败请反馈。
#!category=网络检测
#!arguments=Proxy:DIRECT,MarkIP:false
#!arguments-desc=Proxy: 选择策略组,默认DIRECT | MarkIP: IP 打码(true/false),默认 false

[Rule]
# 确保检测请求走选定的代理策略
DOMAIN,api.ipregistry.co,{{{Proxy}}}
DOMAIN,ipregistry.co,{{{Proxy}}}
DOMAIN,scamalytics.com,{{{Proxy}}}
DOMAIN,db-ip.com,{{{Proxy}}}
DOMAIN,ipinfo.io,{{{Proxy}}}
DOMAIN,www.ip2location.io,{{{Proxy}}}
DOMAIN,api.ipapi.is,{{{Proxy}}}
DOMAIN,my.ippure.com,{{{Proxy}}}
DOMAIN,ip-api.com,{{{Proxy}}}

[Panel]
IP-Pure = script-name=IPtest, title=IP 测试, content=刷新中…, style=info, update-interval=300

[Script]
IPtest = type=generic, timeout=10, argument={{{MarkIP}}}, script-path=https://raw.githubusercontent.com/Roddy-D/modules/refs/heads/main/iptest.js
